<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- 저장소 테이블 생성 -->
<mapper namespace="com.innobiz.orange.web.wf.dao.WfxTableDao">

	<!-- 기본테이블 -->
	<update id="createWfWorksL" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.createWfWorksL : ${sqlSeq} */<if
	test="sqlSeq == 1">
CREATE TABLE WFG_${formId}_WORKS_L(
	WORK_NO 					NUMBER           NOT NULL,
	COMP_ID 						VARCHAR2(3)   NOT NULL,
	FORM_NO 					NUMBER           NOT NULL,
	GEN_ID 					VARCHAR2(30)           NULL,
	JSON_VA 					NCLOB         NULL,
	LOUT_VA 					NCLOB         NULL,
	ATTR_VA 					NCLOB         NULL,
	MOB_LOUT_VA 			NCLOB         NULL,
	MOB_TAB_VA  			NCLOB         NULL,
	STAT_CD 					CHAR(1) 		NOT NULL,
	REGR_UID		VARCHAR2	(30)	NULL,
	REG_DT		DATE		NULL,
	MODR_UID		VARCHAR2	(30)	NULL,
	MOD_DT		DATE		NULL
)
TABLESPACE TS_GW_WK
STORAGE (INITIAL 1M NEXT 1M MAXEXTENTS UNLIMITED)
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 2">
COMMENT ON TABLE WFG_${formId}_WORKS_L IS '생성테이블목록'</if><if
	test="sqlSeq == 3">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.WORK_NO IS '업무번호'</if><if
	test="sqlSeq == 4">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.COMP_ID IS '회사ID'</if><if
	test="sqlSeq == 5">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.FORM_NO IS '양식번호'</if><if
	test="sqlSeq == 6">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.GEN_ID IS '생성ID'</if><if
	test="sqlSeq == 7">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.JSON_VA IS 'JSON값'</if><if
	test="sqlSeq == 8">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.LOUT_VA IS '레이아웃값 '</if><if
	test="sqlSeq == 9">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.ATTR_VA IS '속성값'</if><if
	test="sqlSeq == 10">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.MOB_LOUT_VA IS '모바일레이아웃값'</if><if
	test="sqlSeq == 11">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.MOB_TAB_VA IS '모바일탭값'</if><if
	test="sqlSeq == 12">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.STAT_CD IS '상태코드'</if><if
	test="sqlSeq == 13">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.REGR_UID IS '등록자'</if><if
	test="sqlSeq == 14">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.REG_DT IS '등록일시'</if><if
	test="sqlSeq == 15">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.MODR_UID IS '수정자UID'</if><if
	test="sqlSeq == 16">
COMMENT ON COLUMN WFG_${formId}_WORKS_L.MOD_DT IS '수정일시'</if>
	</update><!-- 코드테이블 -->
	<update id="createWfWorksCodeL" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.createWfWorksCodeL : ${sqlSeq} */<if
	test="sqlSeq == 1">
CREATE TABLE WFG_${formId}_WORKS_CODE_L(
WORK_NO NUMBER NOT NULL,
TYP_CD VARCHAR2(30) NOT NULL,
COLM_NM VARCHAR2(120) NOT NULL,
CD_VA VARCHAR2(30) NOT NULL,
SORT_ORDR NUMBER NOT NULL
)
TABLESPACE TS_GW_WK
STORAGE (INITIAL 1M NEXT 1M MAXEXTENTS UNLIMITED)
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 2">
CREATE UNIQUE INDEX PK_WFG_${formId}_WORKS_CODE_L ON WFG_${formId}_WORKS_CODE_L
(
WORK_NO ASC,
TYP_CD ASC,
COLM_NM ASC,
CD_VA ASC
)
TABLESPACE TS_GW_WK
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 3">
ALTER TABLE WFG_${formId}_WORKS_CODE_L ADD
(CONSTRAINT PK_WFG_${formId}_WORKS_CODE_L PRIMARY KEY (WORK_NO, TYP_CD, COLM_NM, CD_VA))</if><if
	test="sqlSeq == 4">
COMMENT ON TABLE WFG_${formId}_WORKS_CODE_L IS '생성테이블코드목록'</if><if
	test="sqlSeq == 5">
COMMENT ON COLUMN WFG_${formId}_WORKS_CODE_L.WORK_NO IS '업무번호'</if><if
	test="sqlSeq == 6">
COMMENT ON COLUMN WFG_${formId}_WORKS_CODE_L.TYP_CD IS '구분코드'</if><if
	test="sqlSeq == 7">
COMMENT ON COLUMN WFG_${formId}_WORKS_CODE_L.COLM_NM IS '컬럼명'</if><if
	test="sqlSeq == 8">
COMMENT ON COLUMN WFG_${formId}_WORKS_CODE_L.CD_VA IS '코드값'</if><if
	test="sqlSeq == 9">
COMMENT ON COLUMN WFG_${formId}_WORKS_CODE_L.SORT_ORDR IS '정렬순서'</if>
	</update><!-- 목록 테이블 -->
	<update id="createWfWorksD" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.createWfWorksD : ${sqlSeq} */<if
	test="sqlSeq == 1">
CREATE TABLE WFG_${formId}_WORKS_D(
	WORK_NO 					NUMBER           NOT NULL,
	COMP_ID 						VARCHAR2(3)   NOT NULL,
	FORM_NO 					NUMBER           NOT NULL,
	GEN_ID 					VARCHAR2(30)           NULL,
    <foreach item="colmVo" index="index" collection="colmVoList">
		${colmVo.colmDbNm} ${colmVo.dataTyp} <if test="colmVo.dataLen != null and colmVo.dataLen != ''">(${colmVo.dataLen})</if>,
	</foreach>
	READ_CNT	NUMBER		NULL,
	REGR_UID		VARCHAR2	(30)	NULL,
	REG_DT		DATE		NULL,
	MODR_UID		VARCHAR2	(30)	NULL,
	MOD_DT		DATE		NULL
)
TABLESPACE TS_GW_WK
STORAGE (INITIAL 1M NEXT 1M MAXEXTENTS UNLIMITED)
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 2">
COMMENT ON TABLE WFG_${formId}_WORKS_D IS '생성테이블상세'</if><if
	test="sqlSeq == 3">
COMMENT ON COLUMN WFG_${formId}_WORKS_D.WORK_NO IS '업무번호'</if><if
	test="sqlSeq == 4">
COMMENT ON COLUMN WFG_${formId}_WORKS_D.COMP_ID IS '회사ID'</if><if
	test="sqlSeq == 5">
COMMENT ON COLUMN WFG_${formId}_WORKS_D.FORM_NO IS '양식번호'</if><if
	test="sqlSeq == 6">
COMMENT ON COLUMN WFG_${formId}_WORKS_D.GEN_ID IS '생성ID'</if><if
	test="sqlSeq == 7">
COMMENT ON COLUMN WFG_${formId}_WORKS_D.READ_CNT IS '조회수'</if><if
	test="sqlSeq == 8">
COMMENT ON COLUMN WFG_${formId}_WORKS_D.REGR_UID IS '등록자'</if><if
	test="sqlSeq == 9">
COMMENT ON COLUMN WFG_${formId}_WORKS_D.REG_DT IS '등록일시'</if><if
	test="sqlSeq == 10">
COMMENT ON COLUMN WFG_${formId}_WORKS_D.MODR_UID IS '수정자UID'</if><if
	test="sqlSeq == 11">
COMMENT ON COLUMN WFG_${formId}_WORKS_D.MOD_DT IS '수정일시'</if>
	</update><!-- 조회이력 -->
	<update id="createWfWorksReadH" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.createWfWorksReadH : ${sqlSeq} */<if
	test="sqlSeq == 1">
CREATE TABLE WFG_${formId}_WORKS_READ_H(
	WORK_NO NUMBER NOT NULL,
	USER_UID VARCHAR2(30) NOT NULL,
	REG_DT DATE NOT NULL
)
TABLESPACE TS_GW_WK
STORAGE (INITIAL 1M NEXT 1M MAXEXTENTS UNLIMITED)
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 2">
CREATE UNIQUE INDEX PK_WFG_${formId}_WORKS_READ_H ON WFG_${formId}_WORKS_READ_H
(
WORK_NO ASC,
USER_UID ASC
)
TABLESPACE TS_GW_WK
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 3">
ALTER TABLE WFG_${formId}_WORKS_READ_H ADD
(CONSTRAINT PK_WFG_${formId}_WORKS_READ_H PRIMARY KEY (WORK_NO, USER_UID))</if><if
	test="sqlSeq == 4">
COMMENT ON TABLE WFG_${formId}_WORKS_READ_H IS '조회이력'</if><if
	test="sqlSeq == 5">
COMMENT ON COLUMN WFG_${formId}_WORKS_READ_H.WORK_NO IS '업무번호'</if><if
	test="sqlSeq == 6">
COMMENT ON COLUMN WFG_${formId}_WORKS_READ_H.USER_UID IS '사용자UID'</if><if
	test="sqlSeq == 7">
COMMENT ON COLUMN WFG_${formId}_WORKS_READ_H.REG_DT IS '등록일시'</if>
	</update><!-- 파일 테이블 -->
	<update id="createWfWorksFileD" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.createWfWorksFileD : ${sqlSeq} */<if
	test="sqlSeq == 1">
CREATE TABLE WFG_${formId}_WORKS_FILE_D(
	FILE_ID NUMBER NOT NULL,
	REF_ID NUMBER,
	DISP_NM NVARCHAR2(240),
	DISP_ORDR NUMBER,
	FILE_EXT VARCHAR2(30),
	FILE_SIZE NUMBER,
	SAVE_PATH VARCHAR2(240),
	USE_YN CHAR(1),
	REGR_UID VARCHAR2(30),
	REG_DT DATE
)
TABLESPACE TS_GW_WK
STORAGE (INITIAL 1M NEXT 1M MAXEXTENTS UNLIMITED)
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 2">
CREATE UNIQUE INDEX PK_WFG_${formId}_WORKS_FILE_D ON WFG_${formId}_WORKS_FILE_D
(
FILE_ID ASC
)
TABLESPACE TS_GW_WK
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 3">
ALTER TABLE WFG_${formId}_WORKS_FILE_D ADD
(CONSTRAINT PK_WFG_${formId}_WORKS_FILE_D PRIMARY KEY (FILE_ID))</if><if
	test="sqlSeq == 4">
COMMENT ON TABLE WFG_${formId}_WORKS_FILE_D IS '생성테이블첨부파일'</if><if
	test="sqlSeq == 5">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.FILE_ID IS '파일ID'</if><if
	test="sqlSeq == 6">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.REF_ID IS '참조ID'</if><if
	test="sqlSeq == 7">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.DISP_NM IS '표시이름'</if><if
	test="sqlSeq == 8">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.DISP_ORDR IS '표시순서'</if><if
	test="sqlSeq == 9">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.FILE_EXT IS '파일확장자'</if><if
	test="sqlSeq == 10">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.FILE_SIZE IS '파일크기'</if><if
	test="sqlSeq == 11">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.SAVE_PATH IS '저장경로'</if><if
	test="sqlSeq == 12">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.USE_YN IS '사용여부'</if><if
	test="sqlSeq == 13">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.REGR_UID IS '등록자'</if><if
	test="sqlSeq == 14">
COMMENT ON COLUMN WFG_${formId}_WORKS_FILE_D.REG_DT IS '등록일시'</if>
	</update><!-- 이미지 테이블 -->
	<update id="createWfWorksImgD" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.createWfWorksImgD : ${sqlSeq} */<if
	test="sqlSeq == 1">
CREATE TABLE WFG_${formId}_WORKS_IMG_D(
	IMG_NO NUMBER NOT NULL,
	WORK_NO NUMBER NOT NULL,
	COLM_NM VARCHAR2(120) NOT NULL,
	IMG_PATH VARCHAR2(240) NOT NULL,
	IMG_WDTH NUMBER NOT NULL,
	IMG_HGHT NUMBER NOT NULL,
	MODR_UID VARCHAR2(30),
	MOD_DT DATE
)
TABLESPACE TS_GW_WK
STORAGE (INITIAL 1M NEXT 1M MAXEXTENTS UNLIMITED)
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 2">
CREATE UNIQUE INDEX PK_WFG_${formId}_WORKS_IMG_D ON WFG_${formId}_WORKS_IMG_D
(
IMG_NO ASC
)
TABLESPACE TS_GW_WK
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 3">
ALTER TABLE WFG_${formId}_WORKS_IMG_D ADD
(CONSTRAINT PK_WFG_${formId}_WORKS_IMG_D PRIMARY KEY (IMG_NO))</if><if
	test="sqlSeq == 4">
COMMENT ON TABLE WFG_${formId}_WORKS_IMG_D IS '생성테이블이미지'</if><if
	test="sqlSeq == 5">
COMMENT ON COLUMN WFG_${formId}_WORKS_IMG_D.IMG_NO IS '이미지번호'</if><if
	test="sqlSeq == 6">
COMMENT ON COLUMN WFG_${formId}_WORKS_IMG_D.WORK_NO IS '업무번호'</if><if
	test="sqlSeq == 7">
COMMENT ON COLUMN WFG_${formId}_WORKS_IMG_D.COLM_NM IS '컬럼명'</if><if
	test="sqlSeq == 8">
COMMENT ON COLUMN WFG_${formId}_WORKS_IMG_D.IMG_PATH IS '이미지경로'</if><if
	test="sqlSeq == 9">
COMMENT ON COLUMN WFG_${formId}_WORKS_IMG_D.IMG_WDTH IS '가로길이'</if><if
	test="sqlSeq == 10">
COMMENT ON COLUMN WFG_${formId}_WORKS_IMG_D.IMG_HGHT IS '세로길이'</if><if
	test="sqlSeq == 11">
COMMENT ON COLUMN WFG_${formId}_WORKS_IMG_D.MODR_UID IS '수정자'</if><if
	test="sqlSeq == 12">
COMMENT ON COLUMN WFG_${formId}_WORKS_IMG_D.MOD_DT IS '수정일시'</if>
	</update>
	<update id="indexWfWorksL" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.indexWfWorksL : ${sqlSeq} */<if
	test="sqlSeq == 1">
CREATE UNIQUE INDEX PK_WFG_${formId}_WORKS_L ON WFG_${formId}_WORKS_L
(
WORK_NO ASC
)
TABLESPACE TS_GW_WK
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 2">
ALTER TABLE WFG_${formId}_WORKS_L ADD
(CONSTRAINT PK_WFG_${formId}_WORKS_L PRIMARY KEY (WORK_NO))</if>
	</update>
	<update id="indexWfWorksD" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.indexWfWorksD : ${sqlSeq} */<if
	test="sqlSeq == 1">
CREATE UNIQUE INDEX PK_WFG_${formId}_WORKS_D ON WFG_${formId}_WORKS_D
(
WORK_NO ASC
)
TABLESPACE TS_GW_WK
LOGGING
NOPARALLEL</if><if
	test="sqlSeq == 2">
ALTER TABLE WFG_${formId}_WORKS_D ADD
(CONSTRAINT PK_WFG_${formId}_WORKS_D PRIMARY KEY (WORK_NO))</if>
	</update>
	<update id="backupWfWorksD" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.backupWfWorksD : ${sqlSeq} */<if
	test="sqlSeq == 1">
CREATE TABLE WFG_${formId}_WORKS_D_BAK AS SELECT * FROM WFG_${formId}_WORKS_D	
</if><if
	test="sqlSeq == 2">DROP TABLE WFG_${formId}_WORKS_D CASCADE CONSTRAINT</if>
</update><update id="insertWfWorksD" parameterType="WfFormGenLVo">
/* com.innobiz.orange.web.wf.dao.WfxTableDao.insertWfWorksD : ${sqlSeq} */<if
	test="sqlSeq == 1">
INSERT INTO WFG_${formId}_WORKS_D(WORK_NO
      ,COMP_ID
      ,FORM_NO
      ,GEN_ID
      <foreach item="colmVo" index="index" collection="colmVoList">
	    ,${colmVo.colmDbNm}
	   </foreach>
	  ,READ_CNT 
      ,REGR_UID
      ,REG_DT
      ,MODR_UID
      ,MOD_DT)
SELECT WORK_NO
      ,COMP_ID
      ,FORM_NO
      ,GEN_ID
      <foreach item="colmVo" index="index" collection="mergeColmVoList">
	    ,${colmVo.colmDbNm}
	   </foreach>
	  ,READ_CNT
      ,REGR_UID
      ,REG_DT
      ,MODR_UID
      ,MOD_DT
FROM WFG_${formId}_WORKS_D_BAK</if><if
	test="sqlSeq == 2">DROP TABLE WFG_${formId}_WORKS_D_BAK CASCADE CONSTRAINT</if>
</update>
<update id="dropWfWorksL" parameterType="WfFormGenLVo" >
		/* com.innobiz.orange.web.wf.dao.WfxTableDao.dropWfWorksL */
DROP TABLE WFG_${formId}_WORKS_L CASCADE CONSTRAINT
	</update><update id="dropWfWorksCodeL" parameterType="WfFormGenLVo" >
		/* com.innobiz.orange.web.wf.dao.WfxTableDao.dropWfWorksCodeL */
DROP TABLE WFG_${formId}_WORKS_CODE_L CASCADE CONSTRAINT
	</update><update id="dropWfWorksFileD" parameterType="WfFormGenLVo" >
		/* com.innobiz.orange.web.wf.dao.WfxTableDao.dropWfWorksFileD */
DROP TABLE WFG_${formId}_WORKS_FILE_D CASCADE CONSTRAINT
	</update><update id="dropWfWorksImgD" parameterType="WfFormGenLVo" >
		/* com.innobiz.orange.web.wf.dao.WfxTableDao.dropWfWorksImgD */
DROP TABLE WFG_${formId}_WORKS_IMG_D CASCADE CONSTRAINT
	</update><update id="dropWfWorksReadH" parameterType="WfFormGenLVo" >
		/* com.innobiz.orange.web.wf.dao.WfxTableDao.dropWfWorksImgD */
DROP TABLE WFG_${formId}_WORKS_READ_H CASCADE CONSTRAINT
	</update><update id="dropWfWorksD" parameterType="WfFormGenLVo" >
		/* com.innobiz.orange.web.wf.dao.WfxTableDao.dropWfWorksD */
DROP TABLE WFG_${formId}_WORKS_D CASCADE CONSTRAINT
	</update><update id="dropWfWorksDBak" parameterType="WfFormGenLVo" >
		/* com.innobiz.orange.web.wf.dao.WfxTableDao.dropWfWorksDBak */
DROP TABLE WFG_${formId}_WORKS_D_BAK CASCADE CONSTRAINT
	</update><update id="insertCmSeq" parameterType="WfFormGenLVo" >
		/* com.innobiz.orange.web.wf.dao.WfxTableDao.insertCmSeq */
CREATE SEQUENCE SQ_WFG_${formId}_WORKS_L START WITH 1 INCREMENT BY 1 NOCACHE;	
	</update><update id="deleteCmSeq" parameterType="WfFormGenLVo" >
		/* com.innobiz.orange.web.wf.dao.WfxTableDao.deleteCmSeq */
DROP SEQUENCE SQ_WFG_${formId}_WORKS_L		
	</update>
	
</mapper>