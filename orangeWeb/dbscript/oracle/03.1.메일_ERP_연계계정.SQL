
-- [ 사이트별 변경 사항 ]
-- ABC123 >> [고객코드]

-- 주의 : system 계정으로 실행 할 것


------------------------[ 시스템 설정 ]------------------------
-- 비밀번호 만료 - 제한없음
ALTER PROFILE DEFAULT LIMIT
  FAILED_LOGIN_ATTEMPTS 30
  PASSWORD_LIFE_TIME UNLIMITED;

-- (12c 의 경우)
alter session set "_ORACLE_SCRIPT"=true;

------------------------[ 메일 연계 사용자 ]------------------------

CREATE USER GW_MAIL IDENTIFIED BY "mail123$%^"
DEFAULT TABLESPACE TS_GW_PT;

ALTER USER GW_MAIL QUOTA 0 ON SYSTEM;
ALTER USER GW_MAIL QUOTA UNLIMITED ON TS_GW_PT;

GRANT CREATE SESSION TO GW_MAIL;
GRANT SELECT, UPDATE, DELETE, INSERT ON GW_ABC123_USER.CM_EMAIL_B TO GW_MAIL;
GRANT SELECT, UPDATE, DELETE, INSERT ON GW_ABC123_USER.CM_EMAIL_FILE_D TO GW_MAIL;

CREATE SYNONYM GW_MAIL.CM_EMAIL_B FOR GW_ABC123_USER.CM_EMAIL_B;
CREATE SYNONYM GW_MAIL.CM_EMAIL_FILE_D FOR GW_ABC123_USER.CM_EMAIL_FILE_D;

-- 이메일보내기
GRANT SELECT, UPDATE, DELETE, INSERT ON GW_ABC123_USER.EM_SEND_EMAIL_B TO GW_MAIL;
GRANT SELECT, UPDATE, DELETE, INSERT ON GW_ABC123_USER.EM_SEND_EMAIL_FILE_D TO GW_MAIL;

CREATE SYNONYM GW_MAIL.EM_SEND_EMAIL_B FOR GW_ABC123_USER.EM_SEND_EMAIL_B;
CREATE SYNONYM GW_MAIL.EM_SEND_EMAIL_FILE_D FOR GW_ABC123_USER.EM_SEND_EMAIL_FILE_D;

-- (12c 의 경우)
ALTER USER GW_MAIL DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS;

------------------------[ ERP 연계 사용자 ]------------------------

CREATE USER GW_ERP IDENTIFIED BY "erp123$%^"
DEFAULT TABLESPACE TS_GW_AP;

ALTER USER GW_ERP QUOTA 0 ON SYSTEM;
ALTER USER GW_ERP QUOTA UNLIMITED ON TS_GW_AP;

GRANT CREATE SESSION TO GW_ERP;
GRANT SELECT, UPDATE, DELETE, INSERT ON GW_ABC123_USER.AP_ERP_INTG_B TO GW_ERP;
GRANT SELECT, UPDATE, DELETE, INSERT ON GW_ABC123_USER.AP_ERP_INTG_FILE_D TO GW_ERP;
GRANT SELECT, UPDATE, DELETE, INSERT ON GW_ABC123_USER.AP_ERP_INTG_CHIT_D TO GW_ERP;

GRANT SELECT ON GW_ABC123_USER.AP_APV_LN_GRP_B TO GW_ERP;
GRANT SELECT ON GW_ABC123_USER.OR_ODUR_B TO GW_ERP;
GRANT SELECT ON GW_ABC123_USER.OR_USER_B TO GW_ERP;
GRANT SELECT ON GW_ABC123_USER.OR_ORG_B TO GW_ERP;

GRANT SELECT ON GW_ABC123_USER.AP_ONGD_APV_LN_D TO GW_ERP;
GRANT SELECT ON GW_ABC123_USER.PT_RESC_B TO GW_ERP;
GRANT SELECT ON GW_ABC123_USER.PT_CD_B TO GW_ERP;

-- 시퀀스
GRANT SELECT, UPDATE, DELETE, INSERT ON GW_ABC123_USER.CM_EMAIL_B TO GW_ERP;
GRANT SELECT, UPDATE, DELETE, INSERT ON GW_ABC123_USER.CM_EMAIL_FILE_D TO GW_ERP;
GRANT SELECT ON GW_ABC123_USER.SQ_CM_EMAIL_B TO GW_ERP;

-- SYNONYM --
CREATE SYNONYM GW_ERP.AP_ERP_INTG_B FOR GW_ABC123_USER.AP_ERP_INTG_B;
CREATE SYNONYM GW_ERP.AP_ERP_INTG_FILE_D FOR GW_ABC123_USER.AP_ERP_INTG_FILE_D;
CREATE SYNONYM GW_ERP.AP_ERP_INTG_CHIT_D FOR GW_ABC123_USER.AP_ERP_INTG_CHIT_D;

CREATE SYNONYM GW_ERP.AP_APV_LN_GRP_B FOR GW_ABC123_USER.AP_APV_LN_GRP_B;
CREATE SYNONYM GW_ERP.OR_ODUR_B FOR GW_ABC123_USER.OR_ODUR_B;
CREATE SYNONYM GW_ERP.OR_USER_B FOR GW_ABC123_USER.OR_USER_B;
CREATE SYNONYM GW_ERP.OR_ORG_B FOR GW_ABC123_USER.OR_ORG_B;
CREATE SYNONYM GW_ERP.AP_ONGD_APV_LN_D FOR GW_ABC123_USER.AP_ONGD_APV_LN_D;
CREATE SYNONYM GW_ERP.PT_RESC_B FOR GW_ABC123_USER.PT_RESC_B;
CREATE SYNONYM GW_ERP.PT_CD_B FOR GW_ABC123_USER.PT_CD_B;

-- 시퀀스
CREATE SYNONYM GW_ERP.CM_EMAIL_B FOR GW_ABC123_USER.CM_EMAIL_B;
CREATE SYNONYM GW_ERP.CM_EMAIL_FILE_D FOR GW_ABC123_USER.CM_EMAIL_FILE_D;
CREATE SYNONYM GW_ERP.SQ_CM_EMAIL_B FOR GW_ABC123_USER.SQ_CM_EMAIL_B;

-- (12c 의 경우)
ALTER USER GW_ERP DEFAULT TABLESPACE USERS QUOTA UNLIMITED ON USERS;

------------------ [[ 메일용 계정 / 테이블 스페이스 생성 ]] -----------------------
CREATE TABLESPACE TS_MAIL DATAFILE
	'/data/oradata/MAIL/TS_MAIL01.DBF' SIZE 2048M AUTOEXTEND ON MAXSIZE UNLIMITED
EXTENT MANAGEMENT LOCAL
SEGMENT SPACE MANAGEMENT AUTO;

CREATE USER MAIL_ABC123_USER IDENTIFIED BY "asdqwe123$%^"
DEFAULT TABLESPACE TS_MAIL;

ALTER USER MAIL_ABC123_USER QUOTA 0 ON SYSTEM;
ALTER USER MAIL_ABC123_USER QUOTA UNLIMITED ON TS_MAIL;

GRANT CONNECT, RESOURCE TO MAIL_ABC123_USER;
