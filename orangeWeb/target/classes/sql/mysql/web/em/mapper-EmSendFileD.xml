<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<!-- TABLE : <if test="!isMail">EM_SEND_FILE_D</if><if test="isMail">EM_SEND_EMAIL_FILE_D</if>[첨부파일] -->
<mapper namespace="com.innobiz.orange.web.em.dao.EmSendFileDDao">

	<resultMap id="emSendFileDMap" type="EmSendFileDVo">
		<id property="sendNo" column="SEND_NO" /><!-- 보내기번호 -->
		<id property="emailNo" column="EMAIL_NO" /><!-- 이메일번호 -->
		<id property="fileSeq" column="FILE_SEQ" /><!-- 파일일련번호 -->
		<result property="dispNm" column="DISP_NM" /><!-- 표시이름 -->
		<result property="fileExt" column="FILE_EXT" /><!-- 파일확장자 -->
		<result property="fileSize" column="FILE_SIZE" /><!-- 파일크기 -->
		<result property="savePath" column="SAVE_PATH" /><!-- 저장경로 -->
		<result property="fileCont" column="FILE_CONT" /><!-- 파일내용 -->
	</resultMap>

	<select id="selectEmSendFileD" resultMap="emSendFileDMap" parameterType="EmSendFileDVo" >
		/* com.innobiz.orange.web.em.dao.EmSendFileDDao.selectEmSendFileD */
		SELECT
		<trim prefix="" suffix="" suffixOverrides=",">
			<if test="!isMail">T.SEND_NO,</if>
			<if test="isMail">T.EMAIL_NO,</if>
			T.FILE_SEQ,
			T.DISP_NM,
			T.FILE_EXT,
			T.FILE_SIZE,
			<if test="!isMail">T.SAVE_PATH,</if>
			<if test="isMail">T.FILE_CONT,</if>
		</trim>
		FROM <if test="!isMail">EM_SEND_FILE_D</if><if test="isMail">EM_SEND_EMAIL_FILE_D</if> T
		<where>
			<if test="!isMail"><if test="sendNo != null"> AND T.SEND_NO = #{sendNo, jdbcType=INTEGER}</if></if>
			<if test="isMail"><if test="emailNo != null"> AND T.EMAIL_NO = #{emailNo, jdbcType=INTEGER}</if></if>
			<if test="fileSeq != null"> AND T.FILE_SEQ = #{fileSeq, jdbcType=INTEGER}</if>
			<if test="whereSqllet != null and whereSqllet != ''"> ${whereSqllet}</if>
		</where>
		<if test="orderBy != null">ORDER BY ${orderBy}</if>
		<if test="orderBy == null">ORDER BY T.FILE_SEQ ASC</if>
	</select>

	<insert id="insertEmSendFileD" parameterType="EmSendFileDVo">
		/* com.innobiz.orange.web.em.dao.EmSendFileDDao.insertEmSendFileD */
		INSERT INTO <if test="!isMail">EM_SEND_FILE_D</if><if test="isMail">EM_SEND_EMAIL_FILE_D</if>
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="!isMail">SEND_NO,</if>
			<if test="isMail">EMAIL_NO,</if>
			FILE_SEQ,
			DISP_NM,
			FILE_EXT,
			FILE_SIZE,
			<if test="!isMail">SAVE_PATH,</if>
			<if test="isMail">FILE_CONT,</if>
		</trim>
		<trim prefix="VALUES (" suffix=")" suffixOverrides=",">
			<if test="!isMail">#{sendNo, jdbcType=INTEGER},</if>
			<if test="isMail">#{emailNo, jdbcType=INTEGER},</if>
			#{fileSeq, jdbcType=INTEGER},
			#{dispNm, jdbcType=VARCHAR},
			#{fileExt, jdbcType=VARCHAR},
			#{fileSize, jdbcType=INTEGER},
			<if test="!isMail">#{savePath, jdbcType=VARCHAR},</if>
			<if test="isMail">#{fileCont, jdbcType=VARCHAR},</if>
		</trim>
	</insert>

	<update id="updateEmSendFileD" parameterType="EmSendFileDVo" >
		/* com.innobiz.orange.web.em.dao.EmSendFileDDao.updateEmSendFileD */
		UPDATE <if test="!isMail">EM_SEND_FILE_D</if><if test="isMail">EM_SEND_EMAIL_FILE_D</if>
		<set>
			<if test="dispNm != null"> DISP_NM = #{dispNm, jdbcType=VARCHAR},</if>
		</set>
		<where>
			<if test="!isMail"><if test="sendNo != null"> AND SEND_NO = #{sendNo, jdbcType=INTEGER}</if></if>
			<if test="isMail"><if test="emailNo != null"> AND EMAIL_NO = #{emailNo, jdbcType=INTEGER}</if></if>
			<if test="fileSeq != null"> AND FILE_SEQ = #{fileSeq, jdbcType=INTEGER}</if>
			<if test="whereSqllet != null and whereSqllet != ''"> ${whereSqllet}</if>
		</where>
	</update>

	<delete id="deleteEmSendFileD" parameterType="EmSendFileDVo">
		/* com.innobiz.orange.web.em.dao.EmSendFileDDao.deleteEmSendFileD */
		DELETE FROM <if test="!isMail">EM_SEND_FILE_D</if><if test="isMail">EM_SEND_EMAIL_FILE_D</if>
		<where>
			<if test="!isMail"><if test="sendNo != null"> AND SEND_NO = #{sendNo, jdbcType=INTEGER}</if></if>
			<if test="isMail"><if test="emailNo != null"> AND EMAIL_NO = #{emailNo, jdbcType=INTEGER}</if></if>
			<if test="fileSeq != null"> AND FILE_SEQ = #{fileSeq, jdbcType=INTEGER}</if>
			<if test="whereSqllet != null and whereSqllet != ''"> ${whereSqllet}</if>
		</where>
	</delete>

</mapper>